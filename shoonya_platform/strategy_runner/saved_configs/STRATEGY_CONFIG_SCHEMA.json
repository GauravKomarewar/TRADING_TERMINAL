{   "$schema": "http://json-schema.org/draft-07/schema#",   "$id": "https://shoonya.local/schemas/strategy_config_v1.json",   "title": "Shoonya Strategy Configuration",   "description": "Standard JSON configuration for all trading strategies",   "type": "object",   "required": ["name", "market_config", "entry", "exit"],   "properties": {     "name": {       "type": "string",       "description": "Unique strategy identifier (e.g., NIFTY_DNSS_LIVE)",       "examples": ["NIFTY_DNSS", "BANKNIFTY_THETA", "MCX_CRUDEOIL"]     },     "description": {       "type": "string",       "description": "Human-readable description of the strategy"     },     "version": {       "type": "string",       "description": "Strategy version (e.g., 1.0.0)",       "default": "1.0.0"     },     "enabled": {       "type": "boolean",       "description": "Whether this strategy should run",       "default": true     },     "market_config": {       "type": "object",       "description": "Market data provider configuration",       "required": ["market_type", "exchange", "symbol"],       "properties": {         "market_type": {           "type": "string",           "enum": ["database_market", "live_feed_market"],           "description": "Which market adapter to use"         },         "exchange": {           "type": "string",           "enum": ["NFO", "MCX", "NCDEX", "CDSL"],           "description": "Exchange code"         },         "symbol": {           "type": "string",           "description": "Underlying symbol (NIFTY, BANKNIFTY, CRUDEOIL, etc)",           "examples": ["NIFTY", "BANKNIFTY", "CRUDEOIL"]         },         "db_path": {           "type": "string",           "description": "Path to SQLite database (Required if market_type=database_market)"         },         "websocket_endpoint": {           "type": "string",           "description": "WebSocket endpoint (Optional for live_feed_market)"         }       },       "allOf": [         {           "if": {             "properties": { "market_type": { "const": "database_market" } }           },           "then": {             "required": ["db_path"]           }         }       ]     },     "entry": {       "type": "object",       "description": "Entry configuration (how to enter the position)",       "required": ["entry_time"],       "properties": {         "entry_time": {           "type": "string",           "pattern": "^([0-1][0-9]|2[0-3]):[0-5][0-9]$",           "description": "Time to enter (HH:MM format, 24-hour)",           "examples": ["09:30", "10:00", "14:30"]         },         "entry_type": {           "type": "string",           "enum": ["delta_neutral", "directional", "calendar_spread", "butterfly", "iron_condor"],           "description": "Type of entry strategy",           "default": "delta_neutral"         },         "target_ce_delta": {           "type": "number",           "minimum": 0,           "maximum": 1,           "description": "Target delta for CE leg (0.3 = 30 delta)",           "examples": [0.3, 0.4, 0.5]         },         "target_pe_delta": {           "type": "number",           "minimum": 0,           "maximum": 1,           "description": "Target delta for PE leg (0.3 = 30 delta)",           "examples": [0.3, 0.4, 0.5]         },         "delta_tolerance": {           "type": "number",           "minimum": 0,           "maximum": 0.2,           "description": "Acceptable deviation from target delta",           "default": 0.05         },         "quantity": {           "type": "integer",           "minimum": 1,           "description": "Quantity per leg"         },         "max_attempts": {           "type": "integer",           "minimum": 1,           "description": "Maximum entry attempts before giving up",           "default": 3         }       }     },     "adjustment": {       "type": "object",       "description": "Position adjustment rules (when and how to rebalance)",       "properties": {         "enabled": {           "type": "boolean",           "description": "Enable adjustments",           "default": true         },         "adjustment_type": {           "type": "string",           "enum": ["delta_drift", "stop_loss_triggered", "time_decay", "vega_spike"],           "description": "Trigger type for adjustment",           "default": "delta_drift"         },         "delta_drift_trigger": {           "type": "number",           "minimum": 0,           "maximum": 1,           "description": "Delta deviation that triggers adjustment (0.6 = position delta exceeded 0.6)",           "examples": [0.6, 0.7]         },         "rebalance_target_delta": {           "type": "number",           "minimum": 0,           "maximum": 1,           "description": "Target delta to rebalance back to",           "examples": [0.3, 0.4]         },         "cooldown_seconds": {           "type": "integer",           "minimum": 1,           "description": "Minimum seconds between adjustments",           "default": 60         },         "max_adjustments_per_day": {           "type": "integer",           "minimum": 1,           "description": "Maximum adjustments allowed per trading day",           "default": 5         }       }     },     "exit": {       "type": "object",       "description": "Exit rules (when to close the position)",       "required": ["exit_time"],       "properties": {         "exit_time": {           "type": "string",           "pattern": "^([0-1][0-9]|2[0-3]):[0-5][0-9]$",           "description": "Time to force exit (HH:MM format)",           "examples": ["15:30", "16:00"]         },         "exit_type": {           "type": "string",           "enum": ["profit_target", "stop_loss", "time_based", "manual"],           "description": "Exit trigger type",           "default": "profit_target"         },         "profit_target": {           "type": "number",           "description": "Close position when profit reaches this amount",           "examples": [5000, 10000]         },         "max_loss": {           "type": "number",           "description": "Close position when loss reaches this amount (stop loss)",           "examples": [2000, 5000]         },         "profit_target_percent": {           "type": "number",           "description": "Close position at this profit percentage",           "examples": [2, 5, 10]         },         "stop_loss_percent": {           "type": "number",           "description": "Close position at this loss percentage",           "examples": [1, 2, 5]         },         "trailing_stop_enabled": {           "type": "boolean",           "description": "Use trailing stop loss",           "default": false         },         "trailing_stop_percent": {           "type": "number",           "description": "Trailing stop percentage (when trailing_stop_enabled=true)"         },         "time_exit_override": {           "type": "boolean",           "description": "Close at exit_time regardless of profit/loss",           "default": true         }       }     },     "execution": {       "type": "object",       "description": "Order execution parameters",       "properties": {         "order_type": {           "type": "string",           "enum": ["MARKET", "LIMIT", "STOP", "STOP_LIMIT"],           "description": "Type of order to place",           "default": "MARKET"         },         "product": {           "type": "string",           "enum": ["NRML", "MIS", "CNC"],           "description": "Product type (NRML=Normal, MIS=Intraday, CNC=Delivery)",           "default": "NRML"         },         "price_limit_percent": {           "type": "number",           "description": "Limit price deviation % for LIMIT orders",           "default": 1.0         },         "timeout_seconds": {           "type": "integer",           "description": "Order timeout in seconds",           "default": 30         }       }     },     "risk_management": {       "type": "object",       "description": "Risk control parameters",       "properties": {         "max_concurrent_legs": {           "type": "integer",           "minimum": 1,           "description": "Maximum concurrent leg entries (2 for strangle)",           "default": 2         },         "max_position_size": {           "type": "integer",           "description": "Maximum position size across all legs",           "default": 20         },         "max_total_loss": {           "type": "number",           "description": "Maximum total loss allowed before force exit",           "examples": [10000, 50000]         },         "max_daily_loss": {           "type": "number",           "description": "Maximum loss allowed in a single day"         },         "notional_value_limit": {           "type": "number",           "description": "Maximum notional value of position"         },         "vega_limit": {           "type": "number",           "description": "Maximum vega exposure allowed"         },         "gamma_limit": {           "type": "number",           "description": "Maximum gamma exposure allowed"         }       }     },     "monitoring": {       "type": "object",       "description": "Monitoring and alerting configuration",       "properties": {         "poll_interval_seconds": {           "type": "number",           "minimum": 0.1,           "description": "Strategy execution polling interval",           "default": 2         },         "log_enabled": {           "type": "boolean",           "description": "Enable detailed logging",           "default": true         },         "log_file": {           "type": "string",           "description": "Path to log file for this strategy"         },         "alert_enabled": {           "type": "boolean",           "description": "Enable alerts for critical events",           "default": true         },         "alert_email": {           "type": "string",           "format": "email",           "description": "Email for critical alerts"         },         "alert_webhook": {           "type": "string",           "format": "uri",           "description": "Webhook URL for alerts"         },         "metrics_collection": {           "type": "boolean",           "description": "Collect performance metrics",           "default": true         }       }     },     "backtesting": {       "type": "object",       "description": "Backtesting parameters (informational)",       "properties": {         "is_backtested": {           "type": "boolean",           "description": "Has this strategy been backtested"         },         "backtest_dates": {           "type": "string",           "description": "Date range of backtest (e.g., 2026-01-01 to 2026-01-31)"         },         "backtest_win_rate": {           "type": "number",           "minimum": 0,           "maximum": 100,           "description": "Win rate % from backtest"         },         "backtest_avg_profit": {           "type": "number",           "description": "Average profit per trade from backtest"         },         "backtest_avg_loss": {           "type": "number",           "description": "Average loss per trade from backtest"         }       }     },     "metadata": {       "type": "object",       "description": "Additional metadata",       "properties": {         "author": {           "type": "string",           "description": "Strategy author"         },         "created_date": {           "type": "string",           "format": "date-time",           "description": "Creation date"         },         "last_modified": {           "type": "string",           "format": "date-time",           "description": "Last modification date"         },         "tags": {           "type": "array",           "items": { "type": "string" },           "description": "Tags for organization",           "examples": [["delta_neutral", "short_strangle", "nifty"]]         }       }     }   } }