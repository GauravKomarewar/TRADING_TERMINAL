ğŸ“ˆ Shoonya Automated Options Trading System

Delta Neutral Short Strangle â€“ Production Architecture

1ï¸âƒ£ Project Overview

This project is a fully automated, production-grade options trading system built on the Shoonya API.
It is designed with strict separation of concerns, enabling:

Clean strategy logic

Deterministic execution

Live Greek-based risk management

Exchange-agnostic support (NFO, BFO, MCX)

Future extensibility (web UI, multiple strategies)

The system currently implements a Delta Neutral Short Strangle strategy with dynamic adjustments, live PnL tracking, and automated exit handling.

2ï¸âƒ£ Core Design Principles
âœ… Strategy Purity

Strategies contain only trading logic

No broker calls

No market data polling

No execution logic

âœ… Engine-Driven Execution

A single live engine orchestrates:

Entry timing

Adjustments

Forced exits

Order lifecycle

âœ… ScriptMaster as Source of Truth

All contracts (expiry, lot size, strikes) come from ScriptMaster

No expiry math

No searchscrip

No Shoonya metadata dependency

âœ… Safe Live Trading

Atomic state updates

Pending intent tracking

Fill-based confirmation

Cooldown enforcement

Absolute exit priority

3ï¸âƒ£ High-Level Architecture
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Web / UI Layer        â”‚  (Future)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Live Decision Engine     â”‚
â”‚ (entry / adjust / exit)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Strategy Logic         â”‚
â”‚  (pure, stateless rules)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Order State Management     â”‚
â”‚ (fills, PnL, legs, Greeks)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Market Data + ScriptMaster  â”‚
â”‚ (options, futures, Greeks) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4ï¸âƒ£ Directory Structure (What Goes Where)
ğŸ”¹ strategies/

Pure trading logic

delta_neutral_short_strangle.py

No API calls

No execution

Uses StrategyConfig

ğŸ”¹ trading/

Live execution & orchestration

live_decision_engine.py â†’ main runner

order_state_manager.py â†’ state updates on fills

live_pnl_tracker.py â†’ read-only analytics

trading_bot.py â†’ Shoonya order execution

ğŸ”¹ core/

Contract & FNO intelligence

fno_helper.py â†’ authoritative expiry & lot size

shoonya_client.py â†’ API wrapper

ğŸ”¹ data/

Market data & Greeks

option_chain.py â†’ option selection logic

live_feed_data.py â†’ fast LTP & Greeks polling

scriptmaster.py â†’ metadata backbone

ğŸ”¹ utils/

Reusable helpers

JSON builder for TradingView / webhook

Greeks models

Parsing utilities

ğŸ”¹ web/ (Foundation Ready)

Web UI & monitoring

Flask app

Dashboard

Telegram notifications

REST-ready architecture

5ï¸âƒ£ Strategy Configuration Model

All strategy parameters are injected from the live engine, not hardcoded.

StrategyConfig(
    entry_time,
    exit_time,
    target_entry_delta,
    delta_match_tolerance,
    delta_adjust_trigger,
    max_leg_delta,
    profit_step,
    cooldown_seconds,
)


This allows:

Multiple strategies

UI-driven parameter changes

Backtesting vs live consistency

6ï¸âƒ£ Live Execution Flow (Step-by-Step)

ScriptMaster refresh

Resolve FNO details

Option expiry

Lot size

Warm option chain

Wait for entry window

Enter delta-neutral strangle

Monitor Greeks + PnL

Auto-adjust on

Delta risk

Profit milestones

Force exit at exit time

Finalize PnL & logs

7ï¸âƒ£ State Safety & Risk Controls

Pending intent registry (no duplicate fills)

Cooldown between adjustments

Absolute exit priority

Delta caps per leg

Atomic realized PnL booking

8ï¸âƒ£ Web App Build Plan (Next Phase)
Phase 1: Monitoring Dashboard

Live PnL

Greeks

Legs

Adjustments history

Strategy status

Phase 2: Control Panel

Start / stop strategy

Change config (entry time, delta, profit step)

Manual exit button

Phase 3: Strategy Manager

Multiple strategies

Multiple symbols

Per-strategy configs

Phase 4: Persistence

Daily state snapshot

Crash recovery

Session replay

9ï¸âƒ£ Production Readiness Status
Area	Status
Architecture	âœ… Final
Strategy Design	âœ… Frozen
MCX / NFO / BFO	âœ… Supported
PnL & Greeks	âœ… Live-safe
Web Ready	âœ… Foundation present
10ï¸âƒ£ Final Note

This system is not a script â€” it is a trading platform.

You have:

Institutional-grade separation

Clean lifecycle ownership

Future-proof extensibility

At this stage, the correct move is stability, not refactoring.